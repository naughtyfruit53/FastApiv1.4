"""Initial migration

Revision ID: 022f8e890f40
Revises: 
Create Date: 2025-08-18 07:39:48.486677

"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = '022f8e890f40'
down_revision = None
branch_labels = None
depends_on = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('organizations',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('subdomain', sa.String(), nullable=False),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('business_type', sa.String(), nullable=True),
    sa.Column('industry', sa.String(), nullable=True),
    sa.Column('website', sa.String(), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('primary_email', sa.String(), nullable=False),
    sa.Column('primary_phone', sa.String(), nullable=False),
    sa.Column('address1', sa.String(), nullable=False),
    sa.Column('address2', sa.String(), nullable=True),
    sa.Column('city', sa.String(), nullable=False),
    sa.Column('state', sa.String(), nullable=False),
    sa.Column('pin_code', sa.String(), nullable=False),
    sa.Column('country', sa.String(), nullable=False),
    sa.Column('state_code', sa.String(), nullable=True),
    sa.Column('gst_number', sa.String(), nullable=True),
    sa.Column('pan_number', sa.String(), nullable=True),
    sa.Column('cin_number', sa.String(), nullable=True),
    sa.Column('plan_type', sa.String(), nullable=False),
    sa.Column('max_users', sa.Integer(), nullable=False),
    sa.Column('storage_limit_gb', sa.Integer(), nullable=False),
    sa.Column('features', sa.JSON(), nullable=True),
    sa.Column('timezone', sa.String(), nullable=False),
    sa.Column('currency', sa.String(), nullable=False),
    sa.Column('date_format', sa.String(), nullable=False),
    sa.Column('financial_year_start', sa.String(), nullable=False),
    sa.Column('company_details_completed', sa.Boolean(), nullable=False),
    sa.Column('org_code', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_org_status_subdomain', 'organizations', ['status', 'subdomain'], unique=False)
    op.create_index(op.f('ix_organizations_id'), 'organizations', ['id'], unique=False)
    op.create_index(op.f('ix_organizations_name'), 'organizations', ['name'], unique=True)
    op.create_index(op.f('ix_organizations_org_code'), 'organizations', ['org_code'], unique=True)
    op.create_index(op.f('ix_organizations_subdomain'), 'organizations', ['subdomain'], unique=True)
    op.create_table('otp_verifications',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('email', sa.String(), nullable=False),
    sa.Column('otp_hash', sa.String(), nullable=False),
    sa.Column('purpose', sa.String(), nullable=False),
    sa.Column('expires_at', sa.DateTime(timezone=True), nullable=False),
    sa.Column('is_used', sa.Boolean(), nullable=False),
    sa.Column('used_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('attempts', sa.Integer(), nullable=False),
    sa.Column('max_attempts', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_otp_email_purpose', 'otp_verifications', ['email', 'purpose'], unique=False)
    op.create_index('idx_otp_expires', 'otp_verifications', ['expires_at'], unique=False)
    op.create_index(op.f('ix_otp_verifications_email'), 'otp_verifications', ['email'], unique=False)
    op.create_index(op.f('ix_otp_verifications_id'), 'otp_verifications', ['id'], unique=False)
    op.create_table('platform_users',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('email', sa.String(), nullable=False),
    sa.Column('hashed_password', sa.String(), nullable=False),
    sa.Column('full_name', sa.String(), nullable=True),
    sa.Column('role', sa.String(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('temp_password_hash', sa.String(), nullable=True),
    sa.Column('temp_password_expires', sa.DateTime(timezone=True), nullable=True),
    sa.Column('force_password_reset', sa.Boolean(), nullable=False),
    sa.Column('failed_login_attempts', sa.Integer(), nullable=False),
    sa.Column('locked_until', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('last_login', sa.DateTime(timezone=True), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_platform_user_active', 'platform_users', ['is_active'], unique=False)
    op.create_index('idx_platform_user_email', 'platform_users', ['email'], unique=False)
    op.create_index(op.f('ix_platform_users_email'), 'platform_users', ['email'], unique=True)
    op.create_index(op.f('ix_platform_users_id'), 'platform_users', ['id'], unique=False)
    op.create_table('companies',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('address1', sa.String(), nullable=False),
    sa.Column('address2', sa.String(), nullable=True),
    sa.Column('city', sa.String(), nullable=False),
    sa.Column('state', sa.String(), nullable=False),
    sa.Column('pin_code', sa.String(), nullable=False),
    sa.Column('state_code', sa.String(), nullable=False),
    sa.Column('gst_number', sa.String(), nullable=True),
    sa.Column('pan_number', sa.String(), nullable=True),
    sa.Column('contact_number', sa.String(), nullable=False),
    sa.Column('email', sa.String(), nullable=True),
    sa.Column('logo_path', sa.String(), nullable=True),
    sa.Column('business_type', sa.String(), nullable=True),
    sa.Column('industry', sa.String(), nullable=True),
    sa.Column('website', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_company_org_name', 'companies', ['organization_id', 'name'], unique=False)
    op.create_index(op.f('ix_companies_id'), 'companies', ['id'], unique=False)
    op.create_index(op.f('ix_companies_organization_id'), 'companies', ['organization_id'], unique=False)
    op.create_table('customers',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('contact_number', sa.String(), nullable=False),
    sa.Column('email', sa.String(), nullable=True),
    sa.Column('address1', sa.String(), nullable=False),
    sa.Column('address2', sa.String(), nullable=True),
    sa.Column('city', sa.String(), nullable=False),
    sa.Column('state', sa.String(), nullable=False),
    sa.Column('pin_code', sa.String(), nullable=False),
    sa.Column('state_code', sa.String(), nullable=False),
    sa.Column('gst_number', sa.String(), nullable=True),
    sa.Column('pan_number', sa.String(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_customer_org_name')
    )
    op.create_index('idx_customer_org_active', 'customers', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_customer_org_name', 'customers', ['organization_id', 'name'], unique=False)
    op.create_index(op.f('ix_customers_id'), 'customers', ['id'], unique=False)
    op.create_index(op.f('ix_customers_name'), 'customers', ['name'], unique=False)
    op.create_index(op.f('ix_customers_organization_id'), 'customers', ['organization_id'], unique=False)
    op.create_table('email_notifications',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('to_email', sa.String(), nullable=False),
    sa.Column('subject', sa.String(), nullable=False),
    sa.Column('body', sa.Text(), nullable=False),
    sa.Column('voucher_type', sa.String(), nullable=True),
    sa.Column('voucher_id', sa.Integer(), nullable=True),
    sa.Column('status', sa.String(), nullable=False),
    sa.Column('sent_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('error_message', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_email_org_status', 'email_notifications', ['organization_id', 'status'], unique=False)
    op.create_index(op.f('ix_email_notifications_id'), 'email_notifications', ['id'], unique=False)
    op.create_index(op.f('ix_email_notifications_organization_id'), 'email_notifications', ['organization_id'], unique=False)
    op.create_table('payment_terms',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('days', sa.Integer(), nullable=False),
    sa.Column('description', sa.String(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_payment_term_org_name', 'payment_terms', ['organization_id', 'name'], unique=False)
    op.create_index(op.f('ix_payment_terms_id'), 'payment_terms', ['id'], unique=False)
    op.create_index(op.f('ix_payment_terms_organization_id'), 'payment_terms', ['organization_id'], unique=False)
    op.create_table('products',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('hsn_code', sa.String(), nullable=True),
    sa.Column('part_number', sa.String(), nullable=True),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('gst_rate', sa.Float(), nullable=False),
    sa.Column('is_gst_inclusive', sa.Boolean(), nullable=False),
    sa.Column('reorder_level', sa.Integer(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('is_manufactured', sa.Boolean(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_product_org_name'),
    sa.UniqueConstraint('organization_id', 'part_number', name='uq_product_org_part_number')
    )
    op.create_index('idx_product_org_active', 'products', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_product_org_hsn', 'products', ['organization_id', 'hsn_code'], unique=False)
    op.create_index('idx_product_org_name', 'products', ['organization_id', 'name'], unique=False)
    op.create_index(op.f('ix_products_id'), 'products', ['id'], unique=False)
    op.create_index(op.f('ix_products_name'), 'products', ['name'], unique=False)
    op.create_index(op.f('ix_products_organization_id'), 'products', ['organization_id'], unique=False)
    op.create_table('users',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=True),
    sa.Column('email', sa.String(), nullable=False),
    sa.Column('username', sa.String(), nullable=False),
    sa.Column('hashed_password', sa.String(), nullable=False),
    sa.Column('supabase_uuid', sa.String(), nullable=True),
    sa.Column('full_name', sa.String(), nullable=True),
    sa.Column('role', sa.String(), nullable=False),
    sa.Column('department', sa.String(), nullable=True),
    sa.Column('designation', sa.String(), nullable=True),
    sa.Column('employee_id', sa.String(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('is_super_admin', sa.Boolean(), nullable=False),
    sa.Column('must_change_password', sa.Boolean(), nullable=False),
    sa.Column('has_stock_access', sa.Boolean(), nullable=False),
    sa.Column('temp_password_hash', sa.String(), nullable=True),
    sa.Column('temp_password_expires', sa.DateTime(timezone=True), nullable=True),
    sa.Column('force_password_reset', sa.Boolean(), nullable=False),
    sa.Column('phone', sa.String(), nullable=True),
    sa.Column('avatar_path', sa.String(), nullable=True),
    sa.Column('failed_login_attempts', sa.Integer(), nullable=False),
    sa.Column('locked_until', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('last_login', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'email', name='uq_user_org_email'),
    sa.UniqueConstraint('organization_id', 'username', name='uq_user_org_username')
    )
    op.create_index('idx_user_org_active', 'users', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_user_org_email', 'users', ['organization_id', 'email'], unique=False)
    op.create_index('idx_user_org_username', 'users', ['organization_id', 'username'], unique=False)
    op.create_index(op.f('ix_users_email'), 'users', ['email'], unique=False)
    op.create_index(op.f('ix_users_id'), 'users', ['id'], unique=False)
    op.create_index(op.f('ix_users_organization_id'), 'users', ['organization_id'], unique=False)
    op.create_index(op.f('ix_users_supabase_uuid'), 'users', ['supabase_uuid'], unique=False)
    op.create_table('vendors',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('contact_number', sa.String(), nullable=False),
    sa.Column('email', sa.String(), nullable=True),
    sa.Column('address1', sa.String(), nullable=False),
    sa.Column('address2', sa.String(), nullable=True),
    sa.Column('city', sa.String(), nullable=False),
    sa.Column('state', sa.String(), nullable=False),
    sa.Column('pin_code', sa.String(), nullable=False),
    sa.Column('state_code', sa.String(), nullable=False),
    sa.Column('gst_number', sa.String(), nullable=True),
    sa.Column('pan_number', sa.String(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'name', name='uq_vendor_org_name')
    )
    op.create_index('idx_vendor_org_active', 'vendors', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_vendor_org_name', 'vendors', ['organization_id', 'name'], unique=False)
    op.create_index(op.f('ix_vendors_id'), 'vendors', ['id'], unique=False)
    op.create_index(op.f('ix_vendors_name'), 'vendors', ['name'], unique=False)
    op.create_index(op.f('ix_vendors_organization_id'), 'vendors', ['organization_id'], unique=False)
    op.create_table('audit_logs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=True),
    sa.Column('table_name', sa.String(), nullable=False),
    sa.Column('record_id', sa.Integer(), nullable=False),
    sa.Column('action', sa.String(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=True),
    sa.Column('changes', sa.JSON(), nullable=True),
    sa.Column('ip_address', sa.String(), nullable=True),
    sa.Column('user_agent', sa.String(), nullable=True),
    sa.Column('timestamp', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_audit_org_table_action', 'audit_logs', ['organization_id', 'table_name', 'action'], unique=False)
    op.create_index('idx_audit_org_timestamp', 'audit_logs', ['organization_id', 'timestamp'], unique=False)
    op.create_index(op.f('ix_audit_logs_id'), 'audit_logs', ['id'], unique=False)
    op.create_index(op.f('ix_audit_logs_organization_id'), 'audit_logs', ['organization_id'], unique=False)
    op.create_table('bill_of_materials',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('bom_name', sa.String(), nullable=False),
    sa.Column('output_item_id', sa.Integer(), nullable=False),
    sa.Column('output_quantity', sa.Float(), nullable=False),
    sa.Column('version', sa.String(), nullable=True),
    sa.Column('validity_start', sa.DateTime(timezone=True), nullable=True),
    sa.Column('validity_end', sa.DateTime(timezone=True), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=False),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('material_cost', sa.Float(), nullable=True),
    sa.Column('labor_cost', sa.Float(), nullable=True),
    sa.Column('overhead_cost', sa.Float(), nullable=True),
    sa.Column('total_cost', sa.Float(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['output_item_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'bom_name', 'version', name='uq_bom_org_name_version')
    )
    op.create_index('idx_bom_org_active', 'bill_of_materials', ['organization_id', 'is_active'], unique=False)
    op.create_index('idx_bom_org_created', 'bill_of_materials', ['organization_id', 'created_at'], unique=False)
    op.create_index('idx_bom_org_output', 'bill_of_materials', ['organization_id', 'output_item_id'], unique=False)
    op.create_index(op.f('ix_bill_of_materials_id'), 'bill_of_materials', ['id'], unique=False)
    op.create_index(op.f('ix_bill_of_materials_organization_id'), 'bill_of_materials', ['organization_id'], unique=False)
    op.create_table('contra_vouchers',
    sa.Column('from_account', sa.String(), nullable=False),
    sa.Column('to_account', sa.String(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_contra_org_voucher_number')
    )
    op.create_index('idx_contra_org_date', 'contra_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index('idx_contra_org_from_account', 'contra_vouchers', ['organization_id', 'from_account'], unique=False)
    op.create_index('idx_contra_org_to_account', 'contra_vouchers', ['organization_id', 'to_account'], unique=False)
    op.create_index(op.f('ix_contra_vouchers_id'), 'contra_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_contra_vouchers_organization_id'), 'contra_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_contra_vouchers_voucher_number'), 'contra_vouchers', ['voucher_number'], unique=False)
    op.create_table('credit_notes',
    sa.Column('customer_id', sa.Integer(), nullable=True),
    sa.Column('vendor_id', sa.Integer(), nullable=True),
    sa.Column('reference_voucher_type', sa.String(), nullable=True),
    sa.Column('reference_voucher_id', sa.Integer(), nullable=True),
    sa.Column('reason', sa.String(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_cn_org_voucher_number')
    )
    op.create_index('idx_cn_org_customer', 'credit_notes', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_cn_org_date', 'credit_notes', ['organization_id', 'date'], unique=False)
    op.create_index('idx_cn_org_vendor', 'credit_notes', ['organization_id', 'vendor_id'], unique=False)
    op.create_index(op.f('ix_credit_notes_id'), 'credit_notes', ['id'], unique=False)
    op.create_index(op.f('ix_credit_notes_organization_id'), 'credit_notes', ['organization_id'], unique=False)
    op.create_index(op.f('ix_credit_notes_voucher_number'), 'credit_notes', ['voucher_number'], unique=False)
    op.create_table('customer_files',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('filename', sa.String(), nullable=False),
    sa.Column('original_filename', sa.String(), nullable=False),
    sa.Column('file_path', sa.String(), nullable=False),
    sa.Column('file_size', sa.Integer(), nullable=False),
    sa.Column('content_type', sa.String(), nullable=False),
    sa.Column('file_type', sa.String(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_customer_file_org_customer', 'customer_files', ['organization_id', 'customer_id'], unique=False)
    op.create_index(op.f('ix_customer_files_id'), 'customer_files', ['id'], unique=False)
    op.create_index(op.f('ix_customer_files_organization_id'), 'customer_files', ['organization_id'], unique=False)
    op.create_table('debit_notes',
    sa.Column('customer_id', sa.Integer(), nullable=True),
    sa.Column('vendor_id', sa.Integer(), nullable=True),
    sa.Column('reference_voucher_type', sa.String(), nullable=True),
    sa.Column('reference_voucher_id', sa.Integer(), nullable=True),
    sa.Column('reason', sa.String(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_dn_org_voucher_number')
    )
    op.create_index('idx_dn_org_customer', 'debit_notes', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_dn_org_date', 'debit_notes', ['organization_id', 'date'], unique=False)
    op.create_index('idx_dn_org_vendor', 'debit_notes', ['organization_id', 'vendor_id'], unique=False)
    op.create_index(op.f('ix_debit_notes_id'), 'debit_notes', ['id'], unique=False)
    op.create_index(op.f('ix_debit_notes_organization_id'), 'debit_notes', ['organization_id'], unique=False)
    op.create_index(op.f('ix_debit_notes_voucher_number'), 'debit_notes', ['voucher_number'], unique=False)
    op.create_table('inter_department_vouchers',
    sa.Column('from_department', sa.String(), nullable=False),
    sa.Column('to_department', sa.String(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_idv_org_voucher_number')
    )
    op.create_index('idx_idv_org_date', 'inter_department_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index('idx_idv_org_from_dept', 'inter_department_vouchers', ['organization_id', 'from_department'], unique=False)
    op.create_index('idx_idv_org_to_dept', 'inter_department_vouchers', ['organization_id', 'to_department'], unique=False)
    op.create_index(op.f('ix_inter_department_vouchers_id'), 'inter_department_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_inter_department_vouchers_organization_id'), 'inter_department_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_inter_department_vouchers_voucher_number'), 'inter_department_vouchers', ['voucher_number'], unique=False)
    op.create_table('journal_vouchers',
    sa.Column('entries', sa.Text(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_journal_org_voucher_number')
    )
    op.create_index('idx_journal_org_date', 'journal_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index(op.f('ix_journal_vouchers_id'), 'journal_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_journal_vouchers_organization_id'), 'journal_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_journal_vouchers_voucher_number'), 'journal_vouchers', ['voucher_number'], unique=False)
    op.create_table('payment_vouchers',
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('payment_method', sa.String(), nullable=True),
    sa.Column('reference', sa.String(), nullable=True),
    sa.Column('bank_account', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_pv_payment_org_voucher_number')
    )
    op.create_index('idx_pv_payment_org_date', 'payment_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index('idx_pv_payment_org_vendor', 'payment_vouchers', ['organization_id', 'vendor_id'], unique=False)
    op.create_index(op.f('ix_payment_vouchers_id'), 'payment_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_payment_vouchers_organization_id'), 'payment_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_payment_vouchers_voucher_number'), 'payment_vouchers', ['voucher_number'], unique=False)
    op.create_table('product_files',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('filename', sa.String(), nullable=False),
    sa.Column('original_filename', sa.String(), nullable=False),
    sa.Column('file_path', sa.String(), nullable=False),
    sa.Column('file_size', sa.Integer(), nullable=False),
    sa.Column('content_type', sa.String(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_product_file_org_product', 'product_files', ['organization_id', 'product_id'], unique=False)
    op.create_index(op.f('ix_product_files_id'), 'product_files', ['id'], unique=False)
    op.create_index(op.f('ix_product_files_organization_id'), 'product_files', ['organization_id'], unique=False)
    op.create_table('proforma_invoices',
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('valid_until', sa.DateTime(timezone=True), nullable=True),
    sa.Column('payment_terms', sa.String(), nullable=True),
    sa.Column('terms_conditions', sa.Text(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_pi_org_voucher_number')
    )
    op.create_index('idx_pi_org_customer', 'proforma_invoices', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_pi_org_date', 'proforma_invoices', ['organization_id', 'date'], unique=False)
    op.create_index(op.f('ix_proforma_invoices_id'), 'proforma_invoices', ['id'], unique=False)
    op.create_index(op.f('ix_proforma_invoices_organization_id'), 'proforma_invoices', ['organization_id'], unique=False)
    op.create_index(op.f('ix_proforma_invoices_voucher_number'), 'proforma_invoices', ['voucher_number'], unique=False)
    op.create_table('purchase_orders',
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('delivery_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('payment_terms', sa.String(), nullable=True),
    sa.Column('terms_conditions', sa.Text(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_po_org_voucher_number')
    )
    op.create_index('idx_po_org_date', 'purchase_orders', ['organization_id', 'date'], unique=False)
    op.create_index('idx_po_org_status', 'purchase_orders', ['organization_id', 'status'], unique=False)
    op.create_index('idx_po_org_vendor', 'purchase_orders', ['organization_id', 'vendor_id'], unique=False)
    op.create_index(op.f('ix_purchase_orders_id'), 'purchase_orders', ['id'], unique=False)
    op.create_index(op.f('ix_purchase_orders_organization_id'), 'purchase_orders', ['organization_id'], unique=False)
    op.create_index(op.f('ix_purchase_orders_voucher_number'), 'purchase_orders', ['voucher_number'], unique=False)
    op.create_table('quotations',
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('valid_until', sa.DateTime(timezone=True), nullable=True),
    sa.Column('payment_terms', sa.String(), nullable=True),
    sa.Column('terms_conditions', sa.Text(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_quotation_org_voucher_number')
    )
    op.create_index('idx_quotation_org_customer', 'quotations', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_quotation_org_date', 'quotations', ['organization_id', 'date'], unique=False)
    op.create_index(op.f('ix_quotations_id'), 'quotations', ['id'], unique=False)
    op.create_index(op.f('ix_quotations_organization_id'), 'quotations', ['organization_id'], unique=False)
    op.create_index(op.f('ix_quotations_voucher_number'), 'quotations', ['voucher_number'], unique=False)
    op.create_table('receipt_vouchers',
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('receipt_method', sa.String(), nullable=True),
    sa.Column('reference', sa.String(), nullable=True),
    sa.Column('bank_account', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_rv_org_voucher_number')
    )
    op.create_index('idx_rv_org_customer', 'receipt_vouchers', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_rv_org_date', 'receipt_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index(op.f('ix_receipt_vouchers_id'), 'receipt_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_receipt_vouchers_organization_id'), 'receipt_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_receipt_vouchers_voucher_number'), 'receipt_vouchers', ['voucher_number'], unique=False)
    op.create_table('sales_orders',
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('delivery_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('payment_terms', sa.String(), nullable=True),
    sa.Column('terms_conditions', sa.Text(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_so_org_voucher_number')
    )
    op.create_index('idx_so_org_customer', 'sales_orders', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_so_org_date', 'sales_orders', ['organization_id', 'date'], unique=False)
    op.create_index('idx_so_org_status', 'sales_orders', ['organization_id', 'status'], unique=False)
    op.create_index(op.f('ix_sales_orders_id'), 'sales_orders', ['id'], unique=False)
    op.create_index(op.f('ix_sales_orders_organization_id'), 'sales_orders', ['organization_id'], unique=False)
    op.create_index(op.f('ix_sales_orders_voucher_number'), 'sales_orders', ['voucher_number'], unique=False)
    op.create_table('stock',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('location', sa.String(), nullable=True),
    sa.Column('last_updated', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'product_id', 'location', name='uq_stock_org_product_location')
    )
    op.create_index('idx_stock_org_location', 'stock', ['organization_id', 'location'], unique=False)
    op.create_index('idx_stock_org_product', 'stock', ['organization_id', 'product_id'], unique=False)
    op.create_index(op.f('ix_stock_id'), 'stock', ['id'], unique=False)
    op.create_index(op.f('ix_stock_organization_id'), 'stock', ['organization_id'], unique=False)
    op.create_table('vendor_files',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('filename', sa.String(), nullable=False),
    sa.Column('original_filename', sa.String(), nullable=False),
    sa.Column('file_path', sa.String(), nullable=False),
    sa.Column('file_size', sa.Integer(), nullable=False),
    sa.Column('content_type', sa.String(), nullable=False),
    sa.Column('file_type', sa.String(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index('idx_vendor_file_org_vendor', 'vendor_files', ['organization_id', 'vendor_id'], unique=False)
    op.create_index(op.f('ix_vendor_files_id'), 'vendor_files', ['id'], unique=False)
    op.create_index(op.f('ix_vendor_files_organization_id'), 'vendor_files', ['organization_id'], unique=False)
    op.create_table('bom_components',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('bom_id', sa.Integer(), nullable=False),
    sa.Column('component_item_id', sa.Integer(), nullable=False),
    sa.Column('quantity_required', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_cost', sa.Float(), nullable=True),
    sa.Column('total_cost', sa.Float(), nullable=True),
    sa.Column('wastage_percentage', sa.Float(), nullable=True),
    sa.Column('is_optional', sa.Boolean(), nullable=True),
    sa.Column('sequence', sa.Integer(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.ForeignKeyConstraint(['bom_id'], ['bill_of_materials.id'], ),
    sa.ForeignKeyConstraint(['component_item_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('bom_id', 'component_item_id', name='uq_bom_component_item')
    )
    op.create_index('idx_bom_comp_org_bom', 'bom_components', ['organization_id', 'bom_id'], unique=False)
    op.create_index('idx_bom_comp_org_item', 'bom_components', ['organization_id', 'component_item_id'], unique=False)
    op.create_index(op.f('ix_bom_components_id'), 'bom_components', ['id'], unique=False)
    op.create_index(op.f('ix_bom_components_organization_id'), 'bom_components', ['organization_id'], unique=False)
    op.create_table('credit_note_items',
    sa.Column('credit_note_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['credit_note_id'], ['credit_notes.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_credit_note_items_id'), 'credit_note_items', ['id'], unique=False)
    op.create_table('debit_note_items',
    sa.Column('debit_note_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['debit_note_id'], ['debit_notes.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_debit_note_items_id'), 'debit_note_items', ['id'], unique=False)
    op.create_table('delivery_challans',
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('sales_order_id', sa.Integer(), nullable=True),
    sa.Column('delivery_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('transport_mode', sa.String(), nullable=True),
    sa.Column('vehicle_number', sa.String(), nullable=True),
    sa.Column('lr_rr_number', sa.String(), nullable=True),
    sa.Column('destination', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['sales_order_id'], ['sales_orders.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_dc_org_voucher_number')
    )
    op.create_index('idx_dc_org_customer', 'delivery_challans', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_dc_org_date', 'delivery_challans', ['organization_id', 'delivery_date'], unique=False)
    op.create_index('idx_dc_org_so', 'delivery_challans', ['organization_id', 'sales_order_id'], unique=False)
    op.create_index(op.f('ix_delivery_challans_id'), 'delivery_challans', ['id'], unique=False)
    op.create_index(op.f('ix_delivery_challans_organization_id'), 'delivery_challans', ['organization_id'], unique=False)
    op.create_index(op.f('ix_delivery_challans_voucher_number'), 'delivery_challans', ['voucher_number'], unique=False)
    op.create_table('goods_receipt_notes',
    sa.Column('purchase_order_id', sa.Integer(), nullable=False),
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('grn_date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('challan_number', sa.String(), nullable=True),
    sa.Column('challan_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('transport_mode', sa.String(), nullable=True),
    sa.Column('vehicle_number', sa.String(), nullable=True),
    sa.Column('lr_rr_number', sa.String(), nullable=True),
    sa.Column('inspection_status', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['purchase_order_id'], ['purchase_orders.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_grn_org_voucher_number')
    )
    op.create_index('idx_grn_org_date', 'goods_receipt_notes', ['organization_id', 'grn_date'], unique=False)
    op.create_index('idx_grn_org_po', 'goods_receipt_notes', ['organization_id', 'purchase_order_id'], unique=False)
    op.create_index('idx_grn_org_vendor', 'goods_receipt_notes', ['organization_id', 'vendor_id'], unique=False)
    op.create_index(op.f('ix_goods_receipt_notes_id'), 'goods_receipt_notes', ['id'], unique=False)
    op.create_index(op.f('ix_goods_receipt_notes_organization_id'), 'goods_receipt_notes', ['organization_id'], unique=False)
    op.create_index(op.f('ix_goods_receipt_notes_voucher_number'), 'goods_receipt_notes', ['voucher_number'], unique=False)
    op.create_table('inter_department_voucher_items',
    sa.Column('inter_department_voucher_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['inter_department_voucher_id'], ['inter_department_vouchers.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_inter_department_voucher_items_id'), 'inter_department_voucher_items', ['id'], unique=False)
    op.create_table('manufacturing_orders',
    sa.Column('bom_id', sa.Integer(), nullable=False),
    sa.Column('planned_quantity', sa.Float(), nullable=False),
    sa.Column('produced_quantity', sa.Float(), nullable=True),
    sa.Column('scrap_quantity', sa.Float(), nullable=True),
    sa.Column('planned_start_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('planned_end_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('actual_start_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('actual_end_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('production_status', sa.String(), nullable=True),
    sa.Column('priority', sa.String(), nullable=True),
    sa.Column('production_department', sa.String(), nullable=True),
    sa.Column('production_location', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['bom_id'], ['bill_of_materials.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_mo_org_voucher_number')
    )
    op.create_index('idx_mo_org_bom', 'manufacturing_orders', ['organization_id', 'bom_id'], unique=False)
    op.create_index('idx_mo_org_date', 'manufacturing_orders', ['organization_id', 'date'], unique=False)
    op.create_index('idx_mo_org_status', 'manufacturing_orders', ['organization_id', 'production_status'], unique=False)
    op.create_index(op.f('ix_manufacturing_orders_id'), 'manufacturing_orders', ['id'], unique=False)
    op.create_index(op.f('ix_manufacturing_orders_organization_id'), 'manufacturing_orders', ['organization_id'], unique=False)
    op.create_index(op.f('ix_manufacturing_orders_voucher_number'), 'manufacturing_orders', ['voucher_number'], unique=False)
    op.create_table('proforma_invoice_items',
    sa.Column('proforma_invoice_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('taxable_amount', sa.Float(), nullable=False),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['proforma_invoice_id'], ['proforma_invoices.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_proforma_invoice_items_id'), 'proforma_invoice_items', ['id'], unique=False)
    op.create_table('purchase_order_items',
    sa.Column('purchase_order_id', sa.Integer(), nullable=False),
    sa.Column('delivered_quantity', sa.Float(), nullable=True),
    sa.Column('pending_quantity', sa.Float(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['purchase_order_id'], ['purchase_orders.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_purchase_order_items_id'), 'purchase_order_items', ['id'], unique=False)
    op.create_table('quotation_items',
    sa.Column('quotation_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['quotation_id'], ['quotations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_quotation_items_id'), 'quotation_items', ['id'], unique=False)
    op.create_table('sales_order_items',
    sa.Column('sales_order_id', sa.Integer(), nullable=False),
    sa.Column('delivered_quantity', sa.Float(), nullable=True),
    sa.Column('pending_quantity', sa.Float(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['sales_order_id'], ['sales_orders.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_sales_order_items_id'), 'sales_order_items', ['id'], unique=False)
    op.create_table('delivery_challan_items',
    sa.Column('delivery_challan_id', sa.Integer(), nullable=False),
    sa.Column('so_item_id', sa.Integer(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['delivery_challan_id'], ['delivery_challans.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['so_item_id'], ['sales_order_items.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_delivery_challan_items_id'), 'delivery_challan_items', ['id'], unique=False)
    op.create_table('goods_receipt_note_items',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('grn_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('po_item_id', sa.Integer(), nullable=True),
    sa.Column('ordered_quantity', sa.Float(), nullable=False),
    sa.Column('received_quantity', sa.Float(), nullable=False),
    sa.Column('accepted_quantity', sa.Float(), nullable=False),
    sa.Column('rejected_quantity', sa.Float(), nullable=True),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('total_cost', sa.Float(), nullable=False),
    sa.Column('remarks', sa.Text(), nullable=True),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('expiry_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('quality_status', sa.String(), nullable=True),
    sa.ForeignKeyConstraint(['grn_id'], ['goods_receipt_notes.id'], ),
    sa.ForeignKeyConstraint(['po_item_id'], ['purchase_order_items.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_goods_receipt_note_items_id'), 'goods_receipt_note_items', ['id'], unique=False)
    op.create_table('job_card_vouchers',
    sa.Column('job_type', sa.String(), nullable=False),
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('manufacturing_order_id', sa.Integer(), nullable=True),
    sa.Column('job_description', sa.Text(), nullable=False),
    sa.Column('job_category', sa.String(), nullable=True),
    sa.Column('expected_completion_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('actual_completion_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('materials_supplied_by', sa.String(), nullable=True),
    sa.Column('delivery_address', sa.Text(), nullable=True),
    sa.Column('transport_mode', sa.String(), nullable=True),
    sa.Column('job_status', sa.String(), nullable=True),
    sa.Column('quality_specifications', sa.Text(), nullable=True),
    sa.Column('quality_check_required', sa.Boolean(), nullable=True),
    sa.Column('approved_by', sa.Integer(), nullable=True),
    sa.Column('approval_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['approved_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['manufacturing_order_id'], ['manufacturing_orders.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_jcv_org_voucher_number')
    )
    op.create_index('idx_jcv_org_date', 'job_card_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index('idx_jcv_org_mo', 'job_card_vouchers', ['organization_id', 'manufacturing_order_id'], unique=False)
    op.create_index('idx_jcv_org_status', 'job_card_vouchers', ['organization_id', 'job_status'], unique=False)
    op.create_index('idx_jcv_org_vendor', 'job_card_vouchers', ['organization_id', 'vendor_id'], unique=False)
    op.create_index(op.f('ix_job_card_vouchers_id'), 'job_card_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_job_card_vouchers_organization_id'), 'job_card_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_job_card_vouchers_voucher_number'), 'job_card_vouchers', ['voucher_number'], unique=False)
    op.create_table('manufacturing_journal_vouchers',
    sa.Column('manufacturing_order_id', sa.Integer(), nullable=False),
    sa.Column('bom_id', sa.Integer(), nullable=False),
    sa.Column('date_of_manufacture', sa.DateTime(timezone=True), nullable=False),
    sa.Column('shift', sa.String(), nullable=True),
    sa.Column('operator', sa.String(), nullable=True),
    sa.Column('supervisor', sa.String(), nullable=True),
    sa.Column('machine_used', sa.String(), nullable=True),
    sa.Column('finished_quantity', sa.Float(), nullable=True),
    sa.Column('scrap_quantity', sa.Float(), nullable=True),
    sa.Column('rework_quantity', sa.Float(), nullable=True),
    sa.Column('byproduct_quantity', sa.Float(), nullable=True),
    sa.Column('material_cost', sa.Float(), nullable=True),
    sa.Column('labor_cost', sa.Float(), nullable=True),
    sa.Column('overhead_cost', sa.Float(), nullable=True),
    sa.Column('total_manufacturing_cost', sa.Float(), nullable=True),
    sa.Column('quality_grade', sa.String(), nullable=True),
    sa.Column('quality_remarks', sa.Text(), nullable=True),
    sa.Column('narration', sa.Text(), nullable=True),
    sa.Column('attachment_path', sa.String(), nullable=True),
    sa.Column('approved_by', sa.Integer(), nullable=True),
    sa.Column('approval_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['approved_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['bom_id'], ['bill_of_materials.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['manufacturing_order_id'], ['manufacturing_orders.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_mjv_org_voucher_number')
    )
    op.create_index('idx_mjv_org_bom', 'manufacturing_journal_vouchers', ['organization_id', 'bom_id'], unique=False)
    op.create_index('idx_mjv_org_date', 'manufacturing_journal_vouchers', ['organization_id', 'date_of_manufacture'], unique=False)
    op.create_index('idx_mjv_org_mo', 'manufacturing_journal_vouchers', ['organization_id', 'manufacturing_order_id'], unique=False)
    op.create_index(op.f('ix_manufacturing_journal_vouchers_id'), 'manufacturing_journal_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_manufacturing_journal_vouchers_organization_id'), 'manufacturing_journal_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_manufacturing_journal_vouchers_voucher_number'), 'manufacturing_journal_vouchers', ['voucher_number'], unique=False)
    op.create_table('material_issues',
    sa.Column('manufacturing_order_id', sa.Integer(), nullable=True),
    sa.Column('issued_to_department', sa.String(), nullable=True),
    sa.Column('issued_to_employee', sa.String(), nullable=True),
    sa.Column('purpose', sa.String(), nullable=True),
    sa.Column('destination', sa.String(), nullable=True),
    sa.Column('issue_time', sa.DateTime(timezone=True), nullable=True),
    sa.Column('expected_return_time', sa.DateTime(timezone=True), nullable=True),
    sa.Column('approved_by', sa.Integer(), nullable=True),
    sa.Column('approval_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['approved_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['manufacturing_order_id'], ['manufacturing_orders.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_mi_org_voucher_number')
    )
    op.create_index('idx_mi_org_date', 'material_issues', ['organization_id', 'date'], unique=False)
    op.create_index('idx_mi_org_dept', 'material_issues', ['organization_id', 'issued_to_department'], unique=False)
    op.create_index('idx_mi_org_mo', 'material_issues', ['organization_id', 'manufacturing_order_id'], unique=False)
    op.create_index(op.f('ix_material_issues_id'), 'material_issues', ['id'], unique=False)
    op.create_index(op.f('ix_material_issues_organization_id'), 'material_issues', ['organization_id'], unique=False)
    op.create_index(op.f('ix_material_issues_voucher_number'), 'material_issues', ['voucher_number'], unique=False)
    op.create_table('material_receipt_vouchers',
    sa.Column('manufacturing_order_id', sa.Integer(), nullable=True),
    sa.Column('source_type', sa.String(), nullable=False),
    sa.Column('source_reference', sa.String(), nullable=True),
    sa.Column('received_from_department', sa.String(), nullable=True),
    sa.Column('received_from_employee', sa.String(), nullable=True),
    sa.Column('received_by_employee', sa.String(), nullable=True),
    sa.Column('receipt_time', sa.DateTime(timezone=True), nullable=True),
    sa.Column('inspection_required', sa.Boolean(), nullable=True),
    sa.Column('inspection_status', sa.String(), nullable=True),
    sa.Column('inspector_name', sa.String(), nullable=True),
    sa.Column('inspection_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('inspection_remarks', sa.Text(), nullable=True),
    sa.Column('condition_on_receipt', sa.String(), nullable=True),
    sa.Column('approved_by', sa.Integer(), nullable=True),
    sa.Column('approval_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['approved_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['manufacturing_order_id'], ['manufacturing_orders.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_mrv_org_voucher_number')
    )
    op.create_index('idx_mrv_org_date', 'material_receipt_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index('idx_mrv_org_mo', 'material_receipt_vouchers', ['organization_id', 'manufacturing_order_id'], unique=False)
    op.create_index('idx_mrv_org_source', 'material_receipt_vouchers', ['organization_id', 'source_type'], unique=False)
    op.create_index(op.f('ix_material_receipt_vouchers_id'), 'material_receipt_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_material_receipt_vouchers_organization_id'), 'material_receipt_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_material_receipt_vouchers_voucher_number'), 'material_receipt_vouchers', ['voucher_number'], unique=False)
    op.create_table('production_entries',
    sa.Column('manufacturing_order_id', sa.Integer(), nullable=False),
    sa.Column('shift', sa.String(), nullable=True),
    sa.Column('operator', sa.String(), nullable=True),
    sa.Column('machine_used', sa.String(), nullable=True),
    sa.Column('good_quantity', sa.Float(), nullable=True),
    sa.Column('rejected_quantity', sa.Float(), nullable=True),
    sa.Column('rework_quantity', sa.Float(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['manufacturing_order_id'], ['manufacturing_orders.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_pe_org_voucher_number')
    )
    op.create_index('idx_pe_org_date', 'production_entries', ['organization_id', 'date'], unique=False)
    op.create_index('idx_pe_org_mo', 'production_entries', ['organization_id', 'manufacturing_order_id'], unique=False)
    op.create_index(op.f('ix_production_entries_id'), 'production_entries', ['id'], unique=False)
    op.create_index(op.f('ix_production_entries_organization_id'), 'production_entries', ['organization_id'], unique=False)
    op.create_index(op.f('ix_production_entries_voucher_number'), 'production_entries', ['voucher_number'], unique=False)
    op.create_table('purchase_vouchers',
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('purchase_order_id', sa.Integer(), nullable=True),
    sa.Column('grn_id', sa.Integer(), nullable=True),
    sa.Column('invoice_number', sa.String(), nullable=True),
    sa.Column('invoice_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('due_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('payment_terms', sa.String(), nullable=True),
    sa.Column('transport_mode', sa.String(), nullable=True),
    sa.Column('vehicle_number', sa.String(), nullable=True),
    sa.Column('lr_rr_number', sa.String(), nullable=True),
    sa.Column('e_way_bill_number', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['grn_id'], ['goods_receipt_notes.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['purchase_order_id'], ['purchase_orders.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_pv_org_voucher_number')
    )
    op.create_index('idx_pv_org_date', 'purchase_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index('idx_pv_org_grn', 'purchase_vouchers', ['organization_id', 'grn_id'], unique=False)
    op.create_index('idx_pv_org_po', 'purchase_vouchers', ['organization_id', 'purchase_order_id'], unique=False)
    op.create_index('idx_pv_org_vendor', 'purchase_vouchers', ['organization_id', 'vendor_id'], unique=False)
    op.create_index(op.f('ix_purchase_vouchers_id'), 'purchase_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_purchase_vouchers_organization_id'), 'purchase_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_purchase_vouchers_voucher_number'), 'purchase_vouchers', ['voucher_number'], unique=False)
    op.create_table('sales_vouchers',
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('sales_order_id', sa.Integer(), nullable=True),
    sa.Column('delivery_challan_id', sa.Integer(), nullable=True),
    sa.Column('invoice_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('due_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('payment_terms', sa.String(), nullable=True),
    sa.Column('place_of_supply', sa.String(), nullable=True),
    sa.Column('transport_mode', sa.String(), nullable=True),
    sa.Column('vehicle_number', sa.String(), nullable=True),
    sa.Column('lr_rr_number', sa.String(), nullable=True),
    sa.Column('e_way_bill_number', sa.String(), nullable=True),
    sa.Column('voucher_type', sa.String(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['delivery_challan_id'], ['delivery_challans.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['sales_order_id'], ['sales_orders.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_sv_org_voucher_number')
    )
    op.create_index('idx_sv_org_challan', 'sales_vouchers', ['organization_id', 'delivery_challan_id'], unique=False)
    op.create_index('idx_sv_org_customer', 'sales_vouchers', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_sv_org_date', 'sales_vouchers', ['organization_id', 'date'], unique=False)
    op.create_index('idx_sv_org_so', 'sales_vouchers', ['organization_id', 'sales_order_id'], unique=False)
    op.create_index(op.f('ix_sales_vouchers_id'), 'sales_vouchers', ['id'], unique=False)
    op.create_index(op.f('ix_sales_vouchers_organization_id'), 'sales_vouchers', ['organization_id'], unique=False)
    op.create_index(op.f('ix_sales_vouchers_voucher_number'), 'sales_vouchers', ['voucher_number'], unique=False)
    op.create_index(op.f('ix_sales_vouchers_voucher_type'), 'sales_vouchers', ['voucher_type'], unique=False)
    op.create_table('stock_journals',
    sa.Column('journal_type', sa.String(), nullable=False),
    sa.Column('from_location', sa.String(), nullable=True),
    sa.Column('to_location', sa.String(), nullable=True),
    sa.Column('from_warehouse', sa.String(), nullable=True),
    sa.Column('to_warehouse', sa.String(), nullable=True),
    sa.Column('manufacturing_order_id', sa.Integer(), nullable=True),
    sa.Column('bom_id', sa.Integer(), nullable=True),
    sa.Column('transfer_reason', sa.String(), nullable=True),
    sa.Column('assembly_product_id', sa.Integer(), nullable=True),
    sa.Column('assembly_quantity', sa.Float(), nullable=True),
    sa.Column('physical_verification_done', sa.Boolean(), nullable=True),
    sa.Column('verified_by', sa.String(), nullable=True),
    sa.Column('verification_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('approved_by', sa.Integer(), nullable=True),
    sa.Column('approval_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['approved_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['assembly_product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['bom_id'], ['bill_of_materials.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['manufacturing_order_id'], ['manufacturing_orders.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_sj_org_voucher_number')
    )
    op.create_index('idx_sj_org_date', 'stock_journals', ['organization_id', 'date'], unique=False)
    op.create_index('idx_sj_org_from_loc', 'stock_journals', ['organization_id', 'from_location'], unique=False)
    op.create_index('idx_sj_org_mo', 'stock_journals', ['organization_id', 'manufacturing_order_id'], unique=False)
    op.create_index('idx_sj_org_to_loc', 'stock_journals', ['organization_id', 'to_location'], unique=False)
    op.create_index('idx_sj_org_type', 'stock_journals', ['organization_id', 'journal_type'], unique=False)
    op.create_index(op.f('ix_stock_journals_id'), 'stock_journals', ['id'], unique=False)
    op.create_index(op.f('ix_stock_journals_organization_id'), 'stock_journals', ['organization_id'], unique=False)
    op.create_index(op.f('ix_stock_journals_voucher_number'), 'stock_journals', ['voucher_number'], unique=False)
    op.create_table('job_card_received_outputs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('job_card_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity_received', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_rate', sa.Float(), nullable=True),
    sa.Column('total_value', sa.Float(), nullable=True),
    sa.Column('quality_status', sa.String(), nullable=True),
    sa.Column('inspection_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('inspection_remarks', sa.Text(), nullable=True),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('receipt_date', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['job_card_id'], ['job_card_vouchers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_job_card_received_outputs_id'), 'job_card_received_outputs', ['id'], unique=False)
    op.create_index(op.f('ix_job_card_received_outputs_organization_id'), 'job_card_received_outputs', ['organization_id'], unique=False)
    op.create_table('job_card_supplied_materials',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('job_card_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity_supplied', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_rate', sa.Float(), nullable=True),
    sa.Column('total_value', sa.Float(), nullable=True),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('lot_number', sa.String(), nullable=True),
    sa.Column('supply_date', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['job_card_id'], ['job_card_vouchers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_job_card_supplied_materials_id'), 'job_card_supplied_materials', ['id'], unique=False)
    op.create_index(op.f('ix_job_card_supplied_materials_organization_id'), 'job_card_supplied_materials', ['organization_id'], unique=False)
    op.create_table('manufacturing_journal_byproducts',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('journal_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_value', sa.Float(), nullable=True),
    sa.Column('total_value', sa.Float(), nullable=True),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('condition', sa.String(), nullable=True),
    sa.ForeignKeyConstraint(['journal_id'], ['manufacturing_journal_vouchers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_manufacturing_journal_byproducts_id'), 'manufacturing_journal_byproducts', ['id'], unique=False)
    op.create_index(op.f('ix_manufacturing_journal_byproducts_organization_id'), 'manufacturing_journal_byproducts', ['organization_id'], unique=False)
    op.create_table('manufacturing_journal_finished_products',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('journal_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_cost', sa.Float(), nullable=True),
    sa.Column('total_cost', sa.Float(), nullable=True),
    sa.Column('quality_grade', sa.String(), nullable=True),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('lot_number', sa.String(), nullable=True),
    sa.ForeignKeyConstraint(['journal_id'], ['manufacturing_journal_vouchers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_manufacturing_journal_finished_products_id'), 'manufacturing_journal_finished_products', ['id'], unique=False)
    op.create_index(op.f('ix_manufacturing_journal_finished_products_organization_id'), 'manufacturing_journal_finished_products', ['organization_id'], unique=False)
    op.create_table('manufacturing_journal_materials',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('journal_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity_consumed', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_cost', sa.Float(), nullable=True),
    sa.Column('total_cost', sa.Float(), nullable=True),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('lot_number', sa.String(), nullable=True),
    sa.ForeignKeyConstraint(['journal_id'], ['manufacturing_journal_vouchers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_manufacturing_journal_materials_id'), 'manufacturing_journal_materials', ['id'], unique=False)
    op.create_index(op.f('ix_manufacturing_journal_materials_organization_id'), 'manufacturing_journal_materials', ['organization_id'], unique=False)
    op.create_table('material_issue_items',
    sa.Column('material_issue_id', sa.Integer(), nullable=False),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('lot_number', sa.String(), nullable=True),
    sa.Column('expiry_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('warehouse_location', sa.String(), nullable=True),
    sa.Column('bin_location', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('taxable_amount', sa.Float(), nullable=False),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['material_issue_id'], ['material_issues.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_material_issue_items_id'), 'material_issue_items', ['id'], unique=False)
    op.create_table('material_receipt_items',
    sa.Column('receipt_id', sa.Integer(), nullable=False),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('lot_number', sa.String(), nullable=True),
    sa.Column('expiry_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('warehouse_location', sa.String(), nullable=True),
    sa.Column('bin_location', sa.String(), nullable=True),
    sa.Column('quality_status', sa.String(), nullable=True),
    sa.Column('inspection_remarks', sa.Text(), nullable=True),
    sa.Column('received_quantity', sa.Float(), nullable=True),
    sa.Column('accepted_quantity', sa.Float(), nullable=True),
    sa.Column('rejected_quantity', sa.Float(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('taxable_amount', sa.Float(), nullable=False),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['receipt_id'], ['material_receipt_vouchers.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_material_receipt_items_id'), 'material_receipt_items', ['id'], unique=False)
    op.create_table('production_entry_items',
    sa.Column('production_entry_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('taxable_amount', sa.Float(), nullable=False),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['production_entry_id'], ['production_entries.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_production_entry_items_id'), 'production_entry_items', ['id'], unique=False)
    op.create_table('purchase_returns',
    sa.Column('vendor_id', sa.Integer(), nullable=False),
    sa.Column('reference_voucher_id', sa.Integer(), nullable=True),
    sa.Column('reason', sa.Text(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['reference_voucher_id'], ['purchase_vouchers.id'], ),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_pr_org_voucher_number')
    )
    op.create_index('idx_pr_org_date', 'purchase_returns', ['organization_id', 'date'], unique=False)
    op.create_index('idx_pr_org_vendor', 'purchase_returns', ['organization_id', 'vendor_id'], unique=False)
    op.create_index(op.f('ix_purchase_returns_id'), 'purchase_returns', ['id'], unique=False)
    op.create_index(op.f('ix_purchase_returns_organization_id'), 'purchase_returns', ['organization_id'], unique=False)
    op.create_index(op.f('ix_purchase_returns_voucher_number'), 'purchase_returns', ['voucher_number'], unique=False)
    op.create_table('purchase_voucher_items',
    sa.Column('purchase_voucher_id', sa.Integer(), nullable=False),
    sa.Column('grn_item_id', sa.Integer(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('taxable_amount', sa.Float(), nullable=False),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['grn_item_id'], ['goods_receipt_note_items.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['purchase_voucher_id'], ['purchase_vouchers.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_purchase_voucher_items_id'), 'purchase_voucher_items', ['id'], unique=False)
    op.create_table('sales_returns',
    sa.Column('customer_id', sa.Integer(), nullable=False),
    sa.Column('reference_voucher_id', sa.Integer(), nullable=True),
    sa.Column('reason', sa.Text(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('voucher_number', sa.String(), nullable=False),
    sa.Column('date', sa.DateTime(timezone=True), nullable=False),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['customer_id'], ['customers.id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['reference_voucher_id'], ['sales_vouchers.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id', 'voucher_number', name='uq_sr_org_voucher_number')
    )
    op.create_index('idx_sr_org_customer', 'sales_returns', ['organization_id', 'customer_id'], unique=False)
    op.create_index('idx_sr_org_date', 'sales_returns', ['organization_id', 'date'], unique=False)
    op.create_index(op.f('ix_sales_returns_id'), 'sales_returns', ['id'], unique=False)
    op.create_index(op.f('ix_sales_returns_organization_id'), 'sales_returns', ['organization_id'], unique=False)
    op.create_index(op.f('ix_sales_returns_voucher_number'), 'sales_returns', ['voucher_number'], unique=False)
    op.create_table('sales_voucher_items',
    sa.Column('sales_voucher_id', sa.Integer(), nullable=False),
    sa.Column('delivery_challan_item_id', sa.Integer(), nullable=True),
    sa.Column('hsn_code', sa.String(), nullable=True),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('taxable_amount', sa.Float(), nullable=False),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['delivery_challan_item_id'], ['delivery_challan_items.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['sales_voucher_id'], ['sales_vouchers.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_sales_voucher_items_id'), 'sales_voucher_items', ['id'], unique=False)
    op.create_table('stock_journal_entries',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=False),
    sa.Column('stock_journal_id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('debit_quantity', sa.Float(), nullable=True),
    sa.Column('credit_quantity', sa.Float(), nullable=True),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_rate', sa.Float(), nullable=True),
    sa.Column('debit_value', sa.Float(), nullable=True),
    sa.Column('credit_value', sa.Float(), nullable=True),
    sa.Column('from_location', sa.String(), nullable=True),
    sa.Column('to_location', sa.String(), nullable=True),
    sa.Column('from_warehouse', sa.String(), nullable=True),
    sa.Column('to_warehouse', sa.String(), nullable=True),
    sa.Column('from_bin', sa.String(), nullable=True),
    sa.Column('to_bin', sa.String(), nullable=True),
    sa.Column('batch_number', sa.String(), nullable=True),
    sa.Column('lot_number', sa.String(), nullable=True),
    sa.Column('expiry_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('transformation_type', sa.String(), nullable=True),
    sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['stock_journal_id'], ['stock_journals.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_stock_journal_entries_id'), 'stock_journal_entries', ['id'], unique=False)
    op.create_index(op.f('ix_stock_journal_entries_organization_id'), 'stock_journal_entries', ['organization_id'], unique=False)
    op.create_table('purchase_return_items',
    sa.Column('purchase_return_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('taxable_amount', sa.Float(), nullable=False),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['purchase_return_id'], ['purchase_returns.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_purchase_return_items_id'), 'purchase_return_items', ['id'], unique=False)
    op.create_table('sales_return_items',
    sa.Column('sales_return_id', sa.Integer(), nullable=False),
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('product_id', sa.Integer(), nullable=False),
    sa.Column('quantity', sa.Float(), nullable=False),
    sa.Column('unit', sa.String(), nullable=False),
    sa.Column('unit_price', sa.Float(), nullable=False),
    sa.Column('discount_percentage', sa.Float(), nullable=True),
    sa.Column('discount_amount', sa.Float(), nullable=True),
    sa.Column('taxable_amount', sa.Float(), nullable=False),
    sa.Column('gst_rate', sa.Float(), nullable=True),
    sa.Column('cgst_amount', sa.Float(), nullable=True),
    sa.Column('sgst_amount', sa.Float(), nullable=True),
    sa.Column('igst_amount', sa.Float(), nullable=True),
    sa.Column('total_amount', sa.Float(), nullable=False),
    sa.ForeignKeyConstraint(['product_id'], ['products.id'], ),
    sa.ForeignKeyConstraint(['sales_return_id'], ['sales_returns.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_sales_return_items_id'), 'sales_return_items', ['id'], unique=False)
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_index(op.f('ix_sales_return_items_id'), table_name='sales_return_items')
    op.drop_table('sales_return_items')
    op.drop_index(op.f('ix_purchase_return_items_id'), table_name='purchase_return_items')
    op.drop_table('purchase_return_items')
    op.drop_index(op.f('ix_stock_journal_entries_organization_id'), table_name='stock_journal_entries')
    op.drop_index(op.f('ix_stock_journal_entries_id'), table_name='stock_journal_entries')
    op.drop_table('stock_journal_entries')
    op.drop_index(op.f('ix_sales_voucher_items_id'), table_name='sales_voucher_items')
    op.drop_table('sales_voucher_items')
    op.drop_index(op.f('ix_sales_returns_voucher_number'), table_name='sales_returns')
    op.drop_index(op.f('ix_sales_returns_organization_id'), table_name='sales_returns')
    op.drop_index(op.f('ix_sales_returns_id'), table_name='sales_returns')
    op.drop_index('idx_sr_org_date', table_name='sales_returns')
    op.drop_index('idx_sr_org_customer', table_name='sales_returns')
    op.drop_table('sales_returns')
    op.drop_index(op.f('ix_purchase_voucher_items_id'), table_name='purchase_voucher_items')
    op.drop_table('purchase_voucher_items')
    op.drop_index(op.f('ix_purchase_returns_voucher_number'), table_name='purchase_returns')
    op.drop_index(op.f('ix_purchase_returns_organization_id'), table_name='purchase_returns')
    op.drop_index(op.f('ix_purchase_returns_id'), table_name='purchase_returns')
    op.drop_index('idx_pr_org_vendor', table_name='purchase_returns')
    op.drop_index('idx_pr_org_date', table_name='purchase_returns')
    op.drop_table('purchase_returns')
    op.drop_index(op.f('ix_production_entry_items_id'), table_name='production_entry_items')
    op.drop_table('production_entry_items')
    op.drop_index(op.f('ix_material_receipt_items_id'), table_name='material_receipt_items')
    op.drop_table('material_receipt_items')
    op.drop_index(op.f('ix_material_issue_items_id'), table_name='material_issue_items')
    op.drop_table('material_issue_items')
    op.drop_index(op.f('ix_manufacturing_journal_materials_organization_id'), table_name='manufacturing_journal_materials')
    op.drop_index(op.f('ix_manufacturing_journal_materials_id'), table_name='manufacturing_journal_materials')
    op.drop_table('manufacturing_journal_materials')
    op.drop_index(op.f('ix_manufacturing_journal_finished_products_organization_id'), table_name='manufacturing_journal_finished_products')
    op.drop_index(op.f('ix_manufacturing_journal_finished_products_id'), table_name='manufacturing_journal_finished_products')
    op.drop_table('manufacturing_journal_finished_products')
    op.drop_index(op.f('ix_manufacturing_journal_byproducts_organization_id'), table_name='manufacturing_journal_byproducts')
    op.drop_index(op.f('ix_manufacturing_journal_byproducts_id'), table_name='manufacturing_journal_byproducts')
    op.drop_table('manufacturing_journal_byproducts')
    op.drop_index(op.f('ix_job_card_supplied_materials_organization_id'), table_name='job_card_supplied_materials')
    op.drop_index(op.f('ix_job_card_supplied_materials_id'), table_name='job_card_supplied_materials')
    op.drop_table('job_card_supplied_materials')
    op.drop_index(op.f('ix_job_card_received_outputs_organization_id'), table_name='job_card_received_outputs')
    op.drop_index(op.f('ix_job_card_received_outputs_id'), table_name='job_card_received_outputs')
    op.drop_table('job_card_received_outputs')
    op.drop_index(op.f('ix_stock_journals_voucher_number'), table_name='stock_journals')
    op.drop_index(op.f('ix_stock_journals_organization_id'), table_name='stock_journals')
    op.drop_index(op.f('ix_stock_journals_id'), table_name='stock_journals')
    op.drop_index('idx_sj_org_type', table_name='stock_journals')
    op.drop_index('idx_sj_org_to_loc', table_name='stock_journals')
    op.drop_index('idx_sj_org_mo', table_name='stock_journals')
    op.drop_index('idx_sj_org_from_loc', table_name='stock_journals')
    op.drop_index('idx_sj_org_date', table_name='stock_journals')
    op.drop_table('stock_journals')
    op.drop_index(op.f('ix_sales_vouchers_voucher_type'), table_name='sales_vouchers')
    op.drop_index(op.f('ix_sales_vouchers_voucher_number'), table_name='sales_vouchers')
    op.drop_index(op.f('ix_sales_vouchers_organization_id'), table_name='sales_vouchers')
    op.drop_index(op.f('ix_sales_vouchers_id'), table_name='sales_vouchers')
    op.drop_index('idx_sv_org_so', table_name='sales_vouchers')
    op.drop_index('idx_sv_org_date', table_name='sales_vouchers')
    op.drop_index('idx_sv_org_customer', table_name='sales_vouchers')
    op.drop_index('idx_sv_org_challan', table_name='sales_vouchers')
    op.drop_table('sales_vouchers')
    op.drop_index(op.f('ix_purchase_vouchers_voucher_number'), table_name='purchase_vouchers')
    op.drop_index(op.f('ix_purchase_vouchers_organization_id'), table_name='purchase_vouchers')
    op.drop_index(op.f('ix_purchase_vouchers_id'), table_name='purchase_vouchers')
    op.drop_index('idx_pv_org_vendor', table_name='purchase_vouchers')
    op.drop_index('idx_pv_org_po', table_name='purchase_vouchers')
    op.drop_index('idx_pv_org_grn', table_name='purchase_vouchers')
    op.drop_index('idx_pv_org_date', table_name='purchase_vouchers')
    op.drop_table('purchase_vouchers')
    op.drop_index(op.f('ix_production_entries_voucher_number'), table_name='production_entries')
    op.drop_index(op.f('ix_production_entries_organization_id'), table_name='production_entries')
    op.drop_index(op.f('ix_production_entries_id'), table_name='production_entries')
    op.drop_index('idx_pe_org_mo', table_name='production_entries')
    op.drop_index('idx_pe_org_date', table_name='production_entries')
    op.drop_table('production_entries')
    op.drop_index(op.f('ix_material_receipt_vouchers_voucher_number'), table_name='material_receipt_vouchers')
    op.drop_index(op.f('ix_material_receipt_vouchers_organization_id'), table_name='material_receipt_vouchers')
    op.drop_index(op.f('ix_material_receipt_vouchers_id'), table_name='material_receipt_vouchers')
    op.drop_index('idx_mrv_org_source', table_name='material_receipt_vouchers')
    op.drop_index('idx_mrv_org_mo', table_name='material_receipt_vouchers')
    op.drop_index('idx_mrv_org_date', table_name='material_receipt_vouchers')
    op.drop_table('material_receipt_vouchers')
    op.drop_index(op.f('ix_material_issues_voucher_number'), table_name='material_issues')
    op.drop_index(op.f('ix_material_issues_organization_id'), table_name='material_issues')
    op.drop_index(op.f('ix_material_issues_id'), table_name='material_issues')
    op.drop_index('idx_mi_org_mo', table_name='material_issues')
    op.drop_index('idx_mi_org_dept', table_name='material_issues')
    op.drop_index('idx_mi_org_date', table_name='material_issues')
    op.drop_table('material_issues')
    op.drop_index(op.f('ix_manufacturing_journal_vouchers_voucher_number'), table_name='manufacturing_journal_vouchers')
    op.drop_index(op.f('ix_manufacturing_journal_vouchers_organization_id'), table_name='manufacturing_journal_vouchers')
    op.drop_index(op.f('ix_manufacturing_journal_vouchers_id'), table_name='manufacturing_journal_vouchers')
    op.drop_index('idx_mjv_org_mo', table_name='manufacturing_journal_vouchers')
    op.drop_index('idx_mjv_org_date', table_name='manufacturing_journal_vouchers')
    op.drop_index('idx_mjv_org_bom', table_name='manufacturing_journal_vouchers')
    op.drop_table('manufacturing_journal_vouchers')
    op.drop_index(op.f('ix_job_card_vouchers_voucher_number'), table_name='job_card_vouchers')
    op.drop_index(op.f('ix_job_card_vouchers_organization_id'), table_name='job_card_vouchers')
    op.drop_index(op.f('ix_job_card_vouchers_id'), table_name='job_card_vouchers')
    op.drop_index('idx_jcv_org_vendor', table_name='job_card_vouchers')
    op.drop_index('idx_jcv_org_status', table_name='job_card_vouchers')
    op.drop_index('idx_jcv_org_mo', table_name='job_card_vouchers')
    op.drop_index('idx_jcv_org_date', table_name='job_card_vouchers')
    op.drop_table('job_card_vouchers')
    op.drop_index(op.f('ix_goods_receipt_note_items_id'), table_name='goods_receipt_note_items')
    op.drop_table('goods_receipt_note_items')
    op.drop_index(op.f('ix_delivery_challan_items_id'), table_name='delivery_challan_items')
    op.drop_table('delivery_challan_items')
    op.drop_index(op.f('ix_sales_order_items_id'), table_name='sales_order_items')
    op.drop_table('sales_order_items')
    op.drop_index(op.f('ix_quotation_items_id'), table_name='quotation_items')
    op.drop_table('quotation_items')
    op.drop_index(op.f('ix_purchase_order_items_id'), table_name='purchase_order_items')
    op.drop_table('purchase_order_items')
    op.drop_index(op.f('ix_proforma_invoice_items_id'), table_name='proforma_invoice_items')
    op.drop_table('proforma_invoice_items')
    op.drop_index(op.f('ix_manufacturing_orders_voucher_number'), table_name='manufacturing_orders')
    op.drop_index(op.f('ix_manufacturing_orders_organization_id'), table_name='manufacturing_orders')
    op.drop_index(op.f('ix_manufacturing_orders_id'), table_name='manufacturing_orders')
    op.drop_index('idx_mo_org_status', table_name='manufacturing_orders')
    op.drop_index('idx_mo_org_date', table_name='manufacturing_orders')
    op.drop_index('idx_mo_org_bom', table_name='manufacturing_orders')
    op.drop_table('manufacturing_orders')
    op.drop_index(op.f('ix_inter_department_voucher_items_id'), table_name='inter_department_voucher_items')
    op.drop_table('inter_department_voucher_items')
    op.drop_index(op.f('ix_goods_receipt_notes_voucher_number'), table_name='goods_receipt_notes')
    op.drop_index(op.f('ix_goods_receipt_notes_organization_id'), table_name='goods_receipt_notes')
    op.drop_index(op.f('ix_goods_receipt_notes_id'), table_name='goods_receipt_notes')
    op.drop_index('idx_grn_org_vendor', table_name='goods_receipt_notes')
    op.drop_index('idx_grn_org_po', table_name='goods_receipt_notes')
    op.drop_index('idx_grn_org_date', table_name='goods_receipt_notes')
    op.drop_table('goods_receipt_notes')
    op.drop_index(op.f('ix_delivery_challans_voucher_number'), table_name='delivery_challans')
    op.drop_index(op.f('ix_delivery_challans_organization_id'), table_name='delivery_challans')
    op.drop_index(op.f('ix_delivery_challans_id'), table_name='delivery_challans')
    op.drop_index('idx_dc_org_so', table_name='delivery_challans')
    op.drop_index('idx_dc_org_date', table_name='delivery_challans')
    op.drop_index('idx_dc_org_customer', table_name='delivery_challans')
    op.drop_table('delivery_challans')
    op.drop_index(op.f('ix_debit_note_items_id'), table_name='debit_note_items')
    op.drop_table('debit_note_items')
    op.drop_index(op.f('ix_credit_note_items_id'), table_name='credit_note_items')
    op.drop_table('credit_note_items')
    op.drop_index(op.f('ix_bom_components_organization_id'), table_name='bom_components')
    op.drop_index(op.f('ix_bom_components_id'), table_name='bom_components')
    op.drop_index('idx_bom_comp_org_item', table_name='bom_components')
    op.drop_index('idx_bom_comp_org_bom', table_name='bom_components')
    op.drop_table('bom_components')
    op.drop_index(op.f('ix_vendor_files_organization_id'), table_name='vendor_files')
    op.drop_index(op.f('ix_vendor_files_id'), table_name='vendor_files')
    op.drop_index('idx_vendor_file_org_vendor', table_name='vendor_files')
    op.drop_table('vendor_files')
    op.drop_index(op.f('ix_stock_organization_id'), table_name='stock')
    op.drop_index(op.f('ix_stock_id'), table_name='stock')
    op.drop_index('idx_stock_org_product', table_name='stock')
    op.drop_index('idx_stock_org_location', table_name='stock')
    op.drop_table('stock')
    op.drop_index(op.f('ix_sales_orders_voucher_number'), table_name='sales_orders')
    op.drop_index(op.f('ix_sales_orders_organization_id'), table_name='sales_orders')
    op.drop_index(op.f('ix_sales_orders_id'), table_name='sales_orders')
    op.drop_index('idx_so_org_status', table_name='sales_orders')
    op.drop_index('idx_so_org_date', table_name='sales_orders')
    op.drop_index('idx_so_org_customer', table_name='sales_orders')
    op.drop_table('sales_orders')
    op.drop_index(op.f('ix_receipt_vouchers_voucher_number'), table_name='receipt_vouchers')
    op.drop_index(op.f('ix_receipt_vouchers_organization_id'), table_name='receipt_vouchers')
    op.drop_index(op.f('ix_receipt_vouchers_id'), table_name='receipt_vouchers')
    op.drop_index('idx_rv_org_date', table_name='receipt_vouchers')
    op.drop_index('idx_rv_org_customer', table_name='receipt_vouchers')
    op.drop_table('receipt_vouchers')
    op.drop_index(op.f('ix_quotations_voucher_number'), table_name='quotations')
    op.drop_index(op.f('ix_quotations_organization_id'), table_name='quotations')
    op.drop_index(op.f('ix_quotations_id'), table_name='quotations')
    op.drop_index('idx_quotation_org_date', table_name='quotations')
    op.drop_index('idx_quotation_org_customer', table_name='quotations')
    op.drop_table('quotations')
    op.drop_index(op.f('ix_purchase_orders_voucher_number'), table_name='purchase_orders')
    op.drop_index(op.f('ix_purchase_orders_organization_id'), table_name='purchase_orders')
    op.drop_index(op.f('ix_purchase_orders_id'), table_name='purchase_orders')
    op.drop_index('idx_po_org_vendor', table_name='purchase_orders')
    op.drop_index('idx_po_org_status', table_name='purchase_orders')
    op.drop_index('idx_po_org_date', table_name='purchase_orders')
    op.drop_table('purchase_orders')
    op.drop_index(op.f('ix_proforma_invoices_voucher_number'), table_name='proforma_invoices')
    op.drop_index(op.f('ix_proforma_invoices_organization_id'), table_name='proforma_invoices')
    op.drop_index(op.f('ix_proforma_invoices_id'), table_name='proforma_invoices')
    op.drop_index('idx_pi_org_date', table_name='proforma_invoices')
    op.drop_index('idx_pi_org_customer', table_name='proforma_invoices')
    op.drop_table('proforma_invoices')
    op.drop_index(op.f('ix_product_files_organization_id'), table_name='product_files')
    op.drop_index(op.f('ix_product_files_id'), table_name='product_files')
    op.drop_index('idx_product_file_org_product', table_name='product_files')
    op.drop_table('product_files')
    op.drop_index(op.f('ix_payment_vouchers_voucher_number'), table_name='payment_vouchers')
    op.drop_index(op.f('ix_payment_vouchers_organization_id'), table_name='payment_vouchers')
    op.drop_index(op.f('ix_payment_vouchers_id'), table_name='payment_vouchers')
    op.drop_index('idx_pv_payment_org_vendor', table_name='payment_vouchers')
    op.drop_index('idx_pv_payment_org_date', table_name='payment_vouchers')
    op.drop_table('payment_vouchers')
    op.drop_index(op.f('ix_journal_vouchers_voucher_number'), table_name='journal_vouchers')
    op.drop_index(op.f('ix_journal_vouchers_organization_id'), table_name='journal_vouchers')
    op.drop_index(op.f('ix_journal_vouchers_id'), table_name='journal_vouchers')
    op.drop_index('idx_journal_org_date', table_name='journal_vouchers')
    op.drop_table('journal_vouchers')
    op.drop_index(op.f('ix_inter_department_vouchers_voucher_number'), table_name='inter_department_vouchers')
    op.drop_index(op.f('ix_inter_department_vouchers_organization_id'), table_name='inter_department_vouchers')
    op.drop_index(op.f('ix_inter_department_vouchers_id'), table_name='inter_department_vouchers')
    op.drop_index('idx_idv_org_to_dept', table_name='inter_department_vouchers')
    op.drop_index('idx_idv_org_from_dept', table_name='inter_department_vouchers')
    op.drop_index('idx_idv_org_date', table_name='inter_department_vouchers')
    op.drop_table('inter_department_vouchers')
    op.drop_index(op.f('ix_debit_notes_voucher_number'), table_name='debit_notes')
    op.drop_index(op.f('ix_debit_notes_organization_id'), table_name='debit_notes')
    op.drop_index(op.f('ix_debit_notes_id'), table_name='debit_notes')
    op.drop_index('idx_dn_org_vendor', table_name='debit_notes')
    op.drop_index('idx_dn_org_date', table_name='debit_notes')
    op.drop_index('idx_dn_org_customer', table_name='debit_notes')
    op.drop_table('debit_notes')
    op.drop_index(op.f('ix_customer_files_organization_id'), table_name='customer_files')
    op.drop_index(op.f('ix_customer_files_id'), table_name='customer_files')
    op.drop_index('idx_customer_file_org_customer', table_name='customer_files')
    op.drop_table('customer_files')
    op.drop_index(op.f('ix_credit_notes_voucher_number'), table_name='credit_notes')
    op.drop_index(op.f('ix_credit_notes_organization_id'), table_name='credit_notes')
    op.drop_index(op.f('ix_credit_notes_id'), table_name='credit_notes')
    op.drop_index('idx_cn_org_vendor', table_name='credit_notes')
    op.drop_index('idx_cn_org_date', table_name='credit_notes')
    op.drop_index('idx_cn_org_customer', table_name='credit_notes')
    op.drop_table('credit_notes')
    op.drop_index(op.f('ix_contra_vouchers_voucher_number'), table_name='contra_vouchers')
    op.drop_index(op.f('ix_contra_vouchers_organization_id'), table_name='contra_vouchers')
    op.drop_index(op.f('ix_contra_vouchers_id'), table_name='contra_vouchers')
    op.drop_index('idx_contra_org_to_account', table_name='contra_vouchers')
    op.drop_index('idx_contra_org_from_account', table_name='contra_vouchers')
    op.drop_index('idx_contra_org_date', table_name='contra_vouchers')
    op.drop_table('contra_vouchers')
    op.drop_index(op.f('ix_bill_of_materials_organization_id'), table_name='bill_of_materials')
    op.drop_index(op.f('ix_bill_of_materials_id'), table_name='bill_of_materials')
    op.drop_index('idx_bom_org_output', table_name='bill_of_materials')
    op.drop_index('idx_bom_org_created', table_name='bill_of_materials')
    op.drop_index('idx_bom_org_active', table_name='bill_of_materials')
    op.drop_table('bill_of_materials')
    op.drop_index(op.f('ix_audit_logs_organization_id'), table_name='audit_logs')
    op.drop_index(op.f('ix_audit_logs_id'), table_name='audit_logs')
    op.drop_index('idx_audit_org_timestamp', table_name='audit_logs')
    op.drop_index('idx_audit_org_table_action', table_name='audit_logs')
    op.drop_table('audit_logs')
    op.drop_index(op.f('ix_vendors_organization_id'), table_name='vendors')
    op.drop_index(op.f('ix_vendors_name'), table_name='vendors')
    op.drop_index(op.f('ix_vendors_id'), table_name='vendors')
    op.drop_index('idx_vendor_org_name', table_name='vendors')
    op.drop_index('idx_vendor_org_active', table_name='vendors')
    op.drop_table('vendors')
    op.drop_index(op.f('ix_users_supabase_uuid'), table_name='users')
    op.drop_index(op.f('ix_users_organization_id'), table_name='users')
    op.drop_index(op.f('ix_users_id'), table_name='users')
    op.drop_index(op.f('ix_users_email'), table_name='users')
    op.drop_index('idx_user_org_username', table_name='users')
    op.drop_index('idx_user_org_email', table_name='users')
    op.drop_index('idx_user_org_active', table_name='users')
    op.drop_table('users')
    op.drop_index(op.f('ix_products_organization_id'), table_name='products')
    op.drop_index(op.f('ix_products_name'), table_name='products')
    op.drop_index(op.f('ix_products_id'), table_name='products')
    op.drop_index('idx_product_org_name', table_name='products')
    op.drop_index('idx_product_org_hsn', table_name='products')
    op.drop_index('idx_product_org_active', table_name='products')
    op.drop_table('products')
    op.drop_index(op.f('ix_payment_terms_organization_id'), table_name='payment_terms')
    op.drop_index(op.f('ix_payment_terms_id'), table_name='payment_terms')
    op.drop_index('idx_payment_term_org_name', table_name='payment_terms')
    op.drop_table('payment_terms')
    op.drop_index(op.f('ix_email_notifications_organization_id'), table_name='email_notifications')
    op.drop_index(op.f('ix_email_notifications_id'), table_name='email_notifications')
    op.drop_index('idx_email_org_status', table_name='email_notifications')
    op.drop_table('email_notifications')
    op.drop_index(op.f('ix_customers_organization_id'), table_name='customers')
    op.drop_index(op.f('ix_customers_name'), table_name='customers')
    op.drop_index(op.f('ix_customers_id'), table_name='customers')
    op.drop_index('idx_customer_org_name', table_name='customers')
    op.drop_index('idx_customer_org_active', table_name='customers')
    op.drop_table('customers')
    op.drop_index(op.f('ix_companies_organization_id'), table_name='companies')
    op.drop_index(op.f('ix_companies_id'), table_name='companies')
    op.drop_index('idx_company_org_name', table_name='companies')
    op.drop_table('companies')
    op.drop_index(op.f('ix_platform_users_id'), table_name='platform_users')
    op.drop_index(op.f('ix_platform_users_email'), table_name='platform_users')
    op.drop_index('idx_platform_user_email', table_name='platform_users')
    op.drop_index('idx_platform_user_active', table_name='platform_users')
    op.drop_table('platform_users')
    op.drop_index(op.f('ix_otp_verifications_id'), table_name='otp_verifications')
    op.drop_index(op.f('ix_otp_verifications_email'), table_name='otp_verifications')
    op.drop_index('idx_otp_expires', table_name='otp_verifications')
    op.drop_index('idx_otp_email_purpose', table_name='otp_verifications')
    op.drop_table('otp_verifications')
    op.drop_index(op.f('ix_organizations_subdomain'), table_name='organizations')
    op.drop_index(op.f('ix_organizations_org_code'), table_name='organizations')
    op.drop_index(op.f('ix_organizations_name'), table_name='organizations')
    op.drop_index(op.f('ix_organizations_id'), table_name='organizations')
    op.drop_index('idx_org_status_subdomain', table_name='organizations')
    op.drop_table('organizations')
    # ### end Alembic commands ###